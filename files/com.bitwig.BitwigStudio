#!/usr/bin/env bash

# get jack configuration for Bitwig Studio
if [[ -f $HOME/.BitwigStudio/jack-config ]]; then
	source $HOME/.BitwigStudio/jack-config

	# start jack
	jackd -RSv -d alsa -r $RATE -p $PERIOD -n $NUMBER_OF_PERIOUDS -m -d $DEVICE &
	pid_of_jack=$!

	sleep 1
else
	# exit
	echo "You have to configure jack first at $HOME/.BitwigStudio/jack-config or just create the file."
	exit 1
fi

# Start Bitwig Studio
/app/bitwig-studio/bitwig-studio

# kill jack
kill -9 $pid_of_jack
